{"ast":null,"code":"var _jsxFileName = \"/home/branko/workspaces/personal/eat-the-blocks/week-4/frontend/src/components/ui/ProposalList.js\",\n    _s = $RefreshSig$();\n\nimport Table from \"react-bootstrap/Table\";\nimport Button from \"react-bootstrap/Button\";\nimport { FcApproval } from \"react-icons/fc\";\nimport { ImLibrary, ImQuill } from \"react-icons/im\";\nimport { useEffect, useState } from \"react\";\nimport { getBlockchain, showError } from \"../../utils/common\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProposalList = () => {\n  _s();\n\n  const [proposals, setProposals] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const getProposals = async () => {\n    const {\n      DAOContract,\n      signerAddress\n    } = await getBlockchain();\n    DAOContract.log;\n\n    try {\n      setProposals(await DAOContract.getProposals());\n      signerAddress && setIsAdmin((await DAOContract.admin()) == signerAddress);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  const vote = async id => {\n    const {\n      DAOContract,\n      signerAddress\n    } = await getBlockchain();\n\n    try {\n      await DAOContract.vote(id);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  const execute = async id => {\n    const {\n      DAOContract,\n      signerAddress\n    } = await getBlockchain();\n\n    try {\n      await DAOContract.executeProposal(id);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  useEffect(() => {\n    getProposals();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"All Proposals\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"#\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Recipient\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Votes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Voting Ends\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: proposals.map(proposal => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: proposal.id.toNumber()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: proposal.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: proposal.amount.toString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: proposal.recipient\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: proposal.votes.toString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: new Date(proposal.end * 1000).toString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(FcApproval, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => vote(proposal.id),\n              children: [/*#__PURE__*/_jsxDEV(ImQuill, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 19\n              }, this), \" Vote\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: isAdmin && /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => execute(proposal.id),\n              children: [/*#__PURE__*/_jsxDEV(ImLibrary, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), \" Execute\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, proposal.id.toString(), true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProposalList, \"mdShFjOI2vD5TEp5oWWvvvcMiFM=\");\n\n_c = ProposalList;\nexport default ProposalList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProposalList\");","map":{"version":3,"names":["Table","Button","FcApproval","ImLibrary","ImQuill","useEffect","useState","getBlockchain","showError","ProposalList","proposals","setProposals","isAdmin","setIsAdmin","getProposals","DAOContract","signerAddress","log","admin","error","vote","id","execute","executeProposal","map","proposal","toNumber","name","amount","toString","recipient","votes","Date","end"],"sources":["/home/branko/workspaces/personal/eat-the-blocks/week-4/frontend/src/components/ui/ProposalList.js"],"sourcesContent":["import Table from \"react-bootstrap/Table\";\nimport Button from \"react-bootstrap/Button\";\nimport { FcApproval } from \"react-icons/fc\";\nimport { ImLibrary, ImQuill } from \"react-icons/im\";\nimport { useEffect, useState } from \"react\";\nimport { getBlockchain, showError } from \"../../utils/common\";\n\nconst ProposalList = () => {\n  const [proposals, setProposals] = useState([]);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const getProposals = async () => {\n    const { DAOContract, signerAddress } = await getBlockchain();\n    DAOContract.log\n    try {\n      setProposals(await DAOContract.getProposals());\n      signerAddress && setIsAdmin((await DAOContract.admin()) == signerAddress);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  const vote = async (id) => {\n    const { DAOContract, signerAddress } = await getBlockchain();\n    try {\n      await DAOContract.vote(id);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  const execute = async (id) => {\n    const { DAOContract, signerAddress } = await getBlockchain();\n    try {\n      await DAOContract.executeProposal(id);\n    } catch (error) {\n      showError(error);\n    }\n  };\n\n  useEffect(() => {\n    getProposals();\n  }, []);\n\n  return (\n    <div>\n      <h3>All Proposals</h3>\n      <Table striped>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Name</th>\n            <th>Amount</th>\n            <th>Recipient</th>\n            <th>Votes</th>\n            <th>Voting Ends</th>\n            <th>Active</th>\n            <th></th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {proposals.map((proposal) => (\n            <tr key={proposal.id.toString()}>\n              <td>{proposal.id.toNumber()}</td>\n              <td>{proposal.name}</td>\n              <td>{proposal.amount.toString()}</td>\n              <td>{proposal.recipient}</td>\n              <td>{proposal.votes.toString()}</td>\n              <td>{new Date(proposal.end * 1000).toString()}</td>\n              <td>\n                <FcApproval />\n              </td>\n              <td>\n                <Button onClick={() => vote(proposal.id)}>\n                  <ImQuill /> Vote\n                </Button>\n              </td>\n              <td>\n                {isAdmin && (\n                  <Button onClick={() => execute(proposal.id)}>\n                    <ImLibrary /> Execute\n                  </Button>\n                )}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </div>\n  );\n};\n\nexport default ProposalList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}